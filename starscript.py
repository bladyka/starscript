import streamlit as st

# Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ğ¹ ÑĞ»Ğ¾Ğ²Ğ°Ñ€ÑŒ ĞºĞ¾Ğ½Ñ†ĞµĞ¿Ñ‚Ğ¾Ğ²
concepts = {
    "Ğ»Ğ¾Ğ´ĞºĞ°": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ğ²Ğ¾Ğ´Ğ°", "Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ", "Ğ´ĞµÑ€ĞµĞ²Ğ¾"], "zs": "Selven"},
    "ĞºĞ¾Ñ€Ğ°Ğ±Ğ»ÑŒ": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ğ¼ĞµÑ‚Ğ°Ğ»Ğ»", "Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ", "Ğ²Ğ¾Ğ´Ğ°"], "zs": "Zortan"},
    "Ğ¼Ğ°ÑˆĞ¸Ğ½Ğ°": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ", "Ğ¼ĞµÑ‚Ğ°Ğ»Ğ»", "Ğ¾Ğ±ÑŠĞµĞºÑ‚"], "zs": "Tarnok"},
    "Ñ€Ğ°ĞºĞµÑ‚Ğ°": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ", "Ğ¾Ğ³Ğ¾Ğ½ÑŒ", "Ğ²Ğ¾Ğ·Ğ´ÑƒÑ…", "Ğ¼ĞµÑ‚Ğ°Ğ»Ğ»"], "zs": "Fyroven"},
    "Ğ»ÑĞ±Ğ¾Ğ²ÑŒ": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ", "Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ¾", "Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº"], "zs": "Haleya"},
    "Ğ²Ñ€Ğ°Ñ‡": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº", "Ğ·Ğ½Ğ°Ğ½Ğ¸Ğµ", "Ğ¸ÑÑ†ĞµĞ»ĞµĞ½Ğ¸Ğµ"], "zs": "Medalyn"},
    "Ğ¾Ğ³Ğ¾Ğ½ÑŒ": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ğ¾Ğ³Ğ¾Ğ½ÑŒ"], "zs": "Fyra"},
    "Ğ²Ğ¾Ğ´Ğ°": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ğ²Ğ¾Ğ´Ğ°"], "zs": "Vel"},
    "Ğ´ĞµÑ€ĞµĞ²Ğ¾": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ğ´ĞµÑ€ĞµĞ²Ğ¾"], "zs": "Drak"},
    "Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ"], "zs": "Tra"},
    "Ğ¾Ğ±ÑŠĞµĞºÑ‚": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ğ¾Ğ±ÑŠĞµĞºÑ‚"], "zs": "Nol"},
    "Ğ¼ĞµÑ‚Ğ°Ğ»Ğ»": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ğ¼ĞµÑ‚Ğ°Ğ»Ğ»"], "zs": "Fer"},
    "Ğ²Ğ¾Ğ·Ğ´ÑƒÑ…": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ğ²Ğ¾Ğ·Ğ´ÑƒÑ…"], "zs": "Ael"},
    "Ğ´Ğ¾Ğ¼": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ğ¶Ğ¸Ğ»Ğ¸Ñ‰Ğµ", "Ğ¿Ñ€Ğ¸ÑÑ‚", "Ğ´Ğ¾Ğ¼"], "zs": "Homar"},
    "Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚", "Ğ¾Ğ±ÑŠĞµĞºÑ‚", "Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ"], "zs": "Toolen"},
    "Ğ²Ğ¾Ğ¸Ğ½": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº", "Ğ¾Ñ€ÑƒĞ¶Ğ¸Ğµ", "ÑÑ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ"], "zs": "Varak"},
    "Ğ¾Ñ€ÑƒĞ¶Ğ¸Ğµ": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ğ¾Ñ€ÑƒĞ¶Ğ¸Ğµ", "ÑÑ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ"], "zs": "Blastr"},
    "Ğ´Ñ€ÑƒĞ³": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ğ´Ñ€ÑƒĞ³", "Ğ´Ğ¾Ğ²ĞµÑ€Ğ¸Ğµ", "Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ"], "zs": "Aluron"},
    "ĞµĞ´Ğ°": {"ĞºĞ»ÑÑ‡Ğ¸": ["ĞµĞ´Ğ°", "Ğ¿Ğ¸Ñ‚Ğ°Ğ½Ğ¸Ğµ"], "zs": "Narka"},
    "Ğ²Ñ€ĞµĞ¼Ñ": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ğ²Ñ€ĞµĞ¼Ñ"], "zs": "Tymar"},
    "Ñ€Ğ°Ğ·ÑƒĞ¼": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ğ¼Ğ¾Ğ·Ğ³", "Ñ€Ğ°Ğ·ÑƒĞ¼", "Ğ¼Ñ‹ÑĞ»ÑŒ"], "zs": "Intar"},
    "Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ğ²Ğ¾ÑĞ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğµ", "Ğ¿Ñ€Ğ¾ÑˆĞ»Ğ¾Ğµ", "Ğ¼Ğ¾Ğ·Ğ³"], "zs": "Remno"},
    "ÑĞ·Ñ‹Ğº": {"ĞºĞ»ÑÑ‡Ğ¸": ["ÑĞ·Ñ‹Ğº", "Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ", "Ğ·Ğ½Ğ°Ğ½Ğ¸Ğµ"], "zs": "Linguen"},
    "Ğ¸ÑĞºÑƒÑÑÑ‚Ğ²Ğ¾": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ñ‚Ğ²Ğ¾Ñ€Ñ‡ĞµÑÑ‚Ğ²Ğ¾", "Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ", "Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ¾"], "zs": "Arteon"},
    "ÑĞ²ĞµÑ‚": {"ĞºĞ»ÑÑ‡Ğ¸": ["ÑĞ²ĞµÑ‚", "ÑĞ½ĞµÑ€Ğ³Ğ¸Ñ"], "zs": "Luma"},
    "Ñ‚ÑŒĞ¼Ğ°": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ñ‚ÑŒĞ¼Ğ°", "Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ ÑĞ²ĞµÑ‚Ğ°"], "zs": "Nox"},
    "ÑĞ½ĞµÑ€Ğ³Ğ¸Ñ": {"ĞºĞ»ÑÑ‡Ğ¸": ["ÑĞ½ĞµÑ€Ğ³Ğ¸Ñ", "Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ"], "zs": "Ener"},
    "Ğ¶Ğ¸Ğ·Ğ½ÑŒ": {"ĞºĞ»ÑÑ‡Ğ¸": ["Ğ¶Ğ¸Ğ·Ğ½ÑŒ", "Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ¼", "Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ"], "zs": "Vita"},
    "ÑĞ¼ĞµÑ€Ñ‚ÑŒ": {"ĞºĞ»ÑÑ‡Ğ¸": ["ÑĞ¼ĞµÑ€Ñ‚ÑŒ", "Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°", "ĞºĞ¾Ğ½ĞµÑ†"], "zs": "Morto"},
}

# ĞĞ±Ñ€Ğ°Ñ‚Ğ½Ñ‹Ğ¹ ÑĞ»Ğ¾Ğ²Ğ°Ñ€ÑŒ Ğ´Ğ»Ñ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ° Ñ ZS
zs_to_human = {v["zs"].lower(): (k, ", ".join(v["ĞºĞ»ÑÑ‡Ğ¸"])) for k, v in concepts.items()}

def find_best_match(word):
    # ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğ¹ ÑĞ»Ğ¾Ğ²Ğ°Ñ€ÑŒ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ñ… Ğ°ÑÑĞ¾Ñ†Ğ¸Ğ°Ñ†Ğ¸Ğ¹
    extended_map = {
        "Ğ»ÑĞ±Ğ¾Ğ²ÑŒ": ["Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ¾", "Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ", "Ğ´Ñ€ÑƒĞ³"],
        "Ñ€Ğ°ĞºĞµÑ‚Ğ°": ["Ğ¼ĞµÑ‚Ğ°Ğ»Ğ»", "Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ", "Ğ¾Ğ³Ğ¾Ğ½ÑŒ", "Ğ²Ğ¾Ğ·Ğ´ÑƒÑ…"],
        "Ğ»Ğ¾Ğ´ĞºĞ°": ["Ğ²Ğ¾Ğ´Ğ°", "Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ", "Ğ´ĞµÑ€ĞµĞ²Ğ¾"],
        "Ğ¼Ğ°ÑˆĞ¸Ğ½Ğ°": ["Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ", "Ğ¼ĞµÑ‚Ğ°Ğ»Ğ»", "Ğ¾Ğ±ÑŠĞµĞºÑ‚"],
        "Ğ²Ñ€Ğ°Ñ‡": ["Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº", "Ğ·Ğ½Ğ°Ğ½Ğ¸Ğµ", "Ğ¸ÑÑ†ĞµĞ»ĞµĞ½Ğ¸Ğµ"],
        "Ğ´Ñ€ÑƒĞ³": ["Ğ´Ğ¾Ğ²ĞµÑ€Ğ¸Ğµ", "Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ"],
        "Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ": ["Ğ¿Ñ€Ğ¾ÑˆĞ»Ğ¾Ğµ", "Ğ¼Ğ¾Ğ·Ğ³", "Ğ²Ğ¾ÑĞ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğµ"],
        "Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚": ["Ğ¾Ğ±ÑŠĞµĞºÑ‚", "Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ"],
        "Ğ²Ğ¾Ğ¸Ğ½": ["Ğ¾Ñ€ÑƒĞ¶Ğ¸Ğµ", "ÑÑ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ", "Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº"],
        "ĞµĞ´Ğ°": ["Ğ¿Ğ¸Ñ‚Ğ°Ğ½Ğ¸Ğµ"],
        "Ğ¶Ğ¸Ğ·Ğ½ÑŒ": ["Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ¼", "Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ"],
        "ÑĞ¼ĞµÑ€Ñ‚ÑŒ": ["Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°", "ĞºĞ¾Ğ½ĞµÑ†"],
    }

    input_keys = extended_map.get(word, [word])

    # ĞŸĞ¾Ğ´Ğ±Ğ¾Ñ€ Ğ±Ğ»Ğ¸Ğ¶Ğ°Ğ¹ÑˆĞµĞ³Ğ¾ ĞºĞ¾Ğ½Ñ†ĞµĞ¿Ñ‚Ğ°
    best_match = None
    max_overlap = 0

    for concept, data in concepts.items():
        overlap = len(set(input_keys) & set(data["ĞºĞ»ÑÑ‡Ğ¸"]))
        if overlap > max_overlap:
            max_overlap = overlap
            best_match = (concept, data["zs"], data["ĞºĞ»ÑÑ‡Ğ¸"])

    if best_match:
        return best_match[1], best_match[0], ", ".join(best_match[2])
    else:
        return "â€”", "ĞĞµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾", "Ğ/Ğ”"

# Streamlit UI
st.set_page_config(page_title="Zvezdny Skript Translator", page_icon="ğŸ›¸")
st.title("ğŸ›¸ Zvezdny Skript Translator")
st.markdown("**Enter a human concept â€“ get its alien equivalent.**")

tab1, tab2 = st.tabs(["â¡ï¸ Human â†’ Alien", "â¬…ï¸ Alien â†’ Human"])

with tab1:
    user_input = st.text_input("Enter a word (e.g. Ğ»ÑĞ±Ğ¾Ğ²ÑŒ, Ñ€Ğ°ĞºĞµÑ‚Ğ°, Ğ²Ñ€Ğ°Ñ‡):")
    if user_input:
        zs_word, matched, details = find_best_match(user_input.lower())
        st.markdown(f"### ğŸ§¬ ZS Word: `{zs_word}`")
        st.markdown(f"**Matched Concept:** {matched}")
        st.markdown(f"**Meaning Components:** {details}")

with tab2:
    zs_input = st.text_input("Enter ZS word (e.g. Selven):")
    if zs_input:
        result = zs_to_human.get(zs_input.lower(), ("Unknown", "â€”"))
        st.markdown(f"### ğŸ§  Earth Concept: `{result[0]}`")
        st.markdown(f"**Keys:** {result[1]}")